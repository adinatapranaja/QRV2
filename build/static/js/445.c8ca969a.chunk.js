"use strict";(self.webpackChunkqr_events_management=self.webpackChunkqr_events_management||[]).push([[445],{9445:(e,t,n)=>{n.r(t),n.d(t,{default:()=>ge});var r=n(9950),a=n(6220),s=n(5985),i=n(2205),o=n(1331),l=n(5961),c=n(9388),d=n(1095),u=n(294),h=n(3245),m=n(158),x=n(4813),p=n(6335),f=n(5102),y=n(5706),v=n(3864),g=n(2281),b=n(3008),j=n.n(b),w=n(821),A=n.n(w),N=n(9418),k=n.n(N),S=n(2004),O=n(6653),D=n(2143),E=n(2775),P=n(7628),C=n(9064),F=n(9189),I=n(675),T=n(9411),R=n(5912),L=["type","layout","connectNulls","ref"],B=["key"];function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function M(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function W(){return W=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},W.apply(this,arguments)}function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(Object(n),!0).forEach(function(t){Z(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function J(e){return function(e){if(Array.isArray(e))return U(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return U(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return U(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function $(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,H(r.key),r)}}function G(e,t,n){return t=q(t),function(e,t){if(t&&("object"===_(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,V()?Reflect.construct(t,n||[],q(e).constructor):t.apply(e,n))}function V(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(V=function(){return!!e})()}function q(e){return q=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},q(e)}function Q(e,t){return Q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Q(e,t)}function Z(e,t,n){return(t=H(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function H(e){var t=function(e,t){if("object"!=_(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==_(t)?t:t+""}var X=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return Z(e=G(this,t,[].concat(r)),"state",{isAnimationFinished:!0,totalLength:0}),Z(e,"generateSimpleStrokeDasharray",function(e,t){return"".concat(t,"px ").concat(e-t,"px")}),Z(e,"getStrokeDasharray",function(n,r,a){var s=a.reduce(function(e,t){return e+t});if(!s)return e.generateSimpleStrokeDasharray(r,n);for(var i=Math.floor(n/s),o=n%s,l=r-n,c=[],d=0,u=0;d<a.length;u+=a[d],++d)if(u+a[d]>o){c=[].concat(J(a.slice(0,d)),[o-u]);break}var h=c.length%2===0?[0,l]:[l];return[].concat(J(t.repeat(a,i)),J(c),h).map(function(e){return"".concat(e,"px")}).join(", ")}),Z(e,"id",(0,F.NF)("recharts-line-")),Z(e,"pathRef",function(t){e.mainCurve=t}),Z(e,"handleAnimationEnd",function(){e.setState({isAnimationFinished:!0}),e.props.onAnimationEnd&&e.props.onAnimationEnd()}),Z(e,"handleAnimationStart",function(){e.setState({isAnimationFinished:!1}),e.props.onAnimationStart&&e.props.onAnimationStart()}),e}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Q(e,t)}(t,e),n=t,s=[{key:"getDerivedStateFromProps",value:function(e,t){return e.animationId!==t.prevAnimationId?{prevAnimationId:e.animationId,curPoints:e.points,prevPoints:t.curPoints}:e.points!==t.curPoints?{curPoints:e.points}:null}},{key:"repeat",value:function(e,t){for(var n=e.length%2!==0?[].concat(J(e),[0]):e,r=[],a=0;a<t;++a)r=[].concat(J(r),J(n));return r}},{key:"renderDotItem",value:function(e,t){var n;if(r.isValidElement(e))n=r.cloneElement(e,t);else if(j()(e))n=e(t);else{var a=t.key,s=M(t,B),i=(0,S.A)("recharts-line-dot","boolean"!==typeof e?e.className:"");n=r.createElement(D.c,W({key:a},s,{className:i}))}return n}}],(a=[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var e=this.getTotalLength();this.setState({totalLength:e})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var e=this.getTotalLength();e!==this.state.totalLength&&this.setState({totalLength:e})}}},{key:"getTotalLength",value:function(){var e=this.mainCurve;try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch(t){return 0}}},{key:"renderErrorBar",value:function(e,t){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var n=this.props,a=n.points,s=n.xAxis,i=n.yAxis,o=n.layout,l=n.children,c=(0,I.aS)(l,C.u);if(!c)return null;var d=function(e,t){return{x:e.x,y:e.y,value:e.value,errorVal:(0,R.kr)(e.payload,t)}},u={clipPath:e?"url(#clipPath-".concat(t,")"):null};return r.createElement(E.W,u,c.map(function(e){return r.cloneElement(e,{key:"bar-".concat(e.props.dataKey),data:a,xAxis:s,yAxis:i,layout:o,dataPointFormatter:d})}))}},{key:"renderDots",value:function(e,n,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,i=s.dot,o=s.points,l=s.dataKey,c=(0,I.J9)(this.props,!1),d=(0,I.J9)(i,!0),u=o.map(function(e,n){var r=z(z(z({key:"dot-".concat(n),r:3},c),d),{},{index:n,cx:e.x,cy:e.y,value:e.value,dataKey:l,payload:e.payload,points:o});return t.renderDotItem(i,r)}),h={clipPath:e?"url(#clipPath-".concat(n?"":"dots-").concat(a,")"):null};return r.createElement(E.W,W({className:"recharts-line-dots",key:"dots"},h),u)}},{key:"renderCurveStatically",value:function(e,t,n,a){var s=this.props,i=s.type,o=s.layout,l=s.connectNulls,c=(s.ref,M(s,L)),d=z(z(z({},(0,I.J9)(c,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:t?"url(#clipPath-".concat(n,")"):null,points:e},a),{},{type:i,layout:o,connectNulls:l});return r.createElement(O.I,W({},d,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(e,t){var n=this,a=this.props,s=a.points,i=a.strokeDasharray,o=a.isAnimationActive,l=a.animationBegin,c=a.animationDuration,d=a.animationEasing,u=a.animationId,h=a.animateNewValues,m=a.width,x=a.height,p=this.state,f=p.prevPoints,y=p.totalLength;return r.createElement(g.Ay,{begin:l,duration:c,isActive:o,easing:d,from:{t:0},to:{t:1},key:"line-".concat(u),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(r){var a=r.t;if(f){var o=f.length/s.length,l=s.map(function(e,t){var n=Math.floor(t*o);if(f[n]){var r=f[n],s=(0,F.Dj)(r.x,e.x),i=(0,F.Dj)(r.y,e.y);return z(z({},e),{},{x:s(a),y:i(a)})}if(h){var l=(0,F.Dj)(2*m,e.x),c=(0,F.Dj)(x/2,e.y);return z(z({},e),{},{x:l(a),y:c(a)})}return z(z({},e),{},{x:e.x,y:e.y})});return n.renderCurveStatically(l,e,t)}var c,d=(0,F.Dj)(0,y)(a);if(i){var u="".concat(i).split(/[,\s]+/gim).map(function(e){return parseFloat(e)});c=n.getStrokeDasharray(d,y,u)}else c=n.generateSimpleStrokeDasharray(y,d);return n.renderCurveStatically(s,e,t,{strokeDasharray:c})})}},{key:"renderCurve",value:function(e,t){var n=this.props,r=n.points,a=n.isAnimationActive,s=this.state,i=s.prevPoints,o=s.totalLength;return a&&r&&r.length&&(!i&&o>0||!k()(i,r))?this.renderCurveWithAnimation(e,t):this.renderCurveStatically(r,e,t)}},{key:"render",value:function(){var e,t=this.props,n=t.hide,a=t.dot,s=t.points,i=t.className,o=t.xAxis,l=t.yAxis,c=t.top,d=t.left,u=t.width,h=t.height,m=t.isAnimationActive,x=t.id;if(n||!s||!s.length)return null;var p=this.state.isAnimationFinished,f=1===s.length,y=(0,S.A)("recharts-line",i),v=o&&o.allowDataOverflow,g=l&&l.allowDataOverflow,b=v||g,j=A()(x)?this.id:x,w=null!==(e=(0,I.J9)(a,!1))&&void 0!==e?e:{r:3,strokeWidth:2},N=w.r,k=void 0===N?3:N,O=w.strokeWidth,D=void 0===O?2:O,C=((0,I.sT)(a)?a:{}).clipDot,F=void 0===C||C,T=2*k+D;return r.createElement(E.W,{className:y},v||g?r.createElement("defs",null,r.createElement("clipPath",{id:"clipPath-".concat(j)},r.createElement("rect",{x:v?d:d-u/2,y:g?c:c-h/2,width:v?u:2*u,height:g?h:2*h})),!F&&r.createElement("clipPath",{id:"clipPath-dots-".concat(j)},r.createElement("rect",{x:d-T/2,y:c-T/2,width:u+T,height:h+T}))):null,!f&&this.renderCurve(b,j),this.renderErrorBar(b,j),(f||a)&&this.renderDots(b,F,j),(!m||p)&&P.Z.renderCallByParent(this.props,s))}}])&&$(n.prototype,a),s&&$(n,s),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,a,s}(r.PureComponent);Z(X,"displayName","Line"),Z(X,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!T.m.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1}),Z(X,"getComposedData",function(e){var t=e.props,n=e.xAxis,r=e.yAxis,a=e.xAxisTicks,s=e.yAxisTicks,i=e.dataKey,o=e.bandSize,l=e.displayedData,c=e.offset,d=t.layout;return z({points:l.map(function(e,t){var l=(0,R.kr)(e,i);return"horizontal"===d?{x:(0,R.nb)({axis:n,ticks:a,bandSize:o,entry:e,index:t}),y:A()(l)?null:r.scale(l),value:l,payload:e}:{x:A()(l)?null:n.scale(l),y:(0,R.nb)({axis:r,ticks:s,bandSize:o,entry:e,index:t}),value:l,payload:e}}),layout:d},c)});var Y=n(1052),ee=(0,v.gu)({chartName:"LineChart",GraphicalChild:X,axisComponents:[{axisType:"xAxis",AxisComp:m.W},{axisType:"yAxis",AxisComp:x.h}],formatAxisMap:Y.pr}),te=n(7360),ne=n(4203),re=n(2528),ae=n(1061),se=n(861),ie=n(4546),oe=n(4298),le=n(1912),ce=n(9981),de=n(2748),ue=n(5975),he=n(6307),me=n(5528),xe=n(6975),pe=n(6121),fe=n(5416),ye=n(5619),ve=n(4414);const ge=()=>{const{userRole:e,currentUser:t}=(0,i.A)(),[n,v]=(0,r.useState)([]),[g,b]=(0,r.useState)([]),[j,w]=(0,r.useState)(!0),[A,N]=(0,r.useState)(null),[k,S]=(0,r.useState)("all"),[O,D]=(0,r.useState)("30"),[E,P]=(0,r.useState)("checkins");(0,r.useEffect)(()=>{if(!t)return;const n=[];try{const r="owner"===e?(0,a.P)((0,a.rJ)(s.db,"events"),(0,a.My)("createdAt","desc")):(0,a.P)((0,a.rJ)(s.db,"events"),(0,a._M)("createdBy","==",t.uid),(0,a.My)("createdAt","desc")),i=(0,a.aQ)(r,e=>{const t=[];e.forEach(e=>{const n={id:e.id,...e.data()};t.push(n)}),v(t),C(t)},e=>{console.error("Error fetching events:",e),N("Failed to load events data")});n.push(i)}catch(r){console.error("Error setting up real-time listeners:",r),N("Failed to initialize real-time data"),w(!1)}return()=>{n.forEach(e=>e())}},[t,e]);const C=async e=>{try{const t=[];for(const n of e)try{const e=(0,a.P)((0,a.rJ)(s.db,"events",n.id,"guests"),(0,a.My)("createdAt","desc"));(await(0,a.GG)(e)).forEach(e=>{const r={id:e.id,eventId:n.id,eventName:n.name,...e.data()};t.push(r)})}catch(A){console.warn(`Failed to load guests for event ${n.id}:`,A)}b(t),w(!1)}catch(t){console.error("Error loading guests:",t),N("Failed to load guests data"),w(!1)}},{stats:F,chartData:I,pieData:T}=(()=>{if(!n.length)return{stats:[],chartData:[],pieData:[]};const e="all"===k?n:n.filter(e=>e.id===k),t="all"===k?g:g.filter(e=>e.eventId===k),r=e.length,a=t.length,s=t.filter(e=>e.checkedIn).length,i=(e.filter(e=>new Date(e.date)>new Date).length,[{label:"Total Events",value:r,change:"+12%",trend:"up",icon:(0,ve.jsx)(ae.A,{className:"w-5 h-5 text-blue-400"})},{label:"Total Guests",value:a,change:"+8%",trend:"up",icon:(0,ve.jsx)(se.A,{className:"w-5 h-5 text-green-400"})},{label:"Check-ins",value:s,change:"+15%",trend:"up",icon:(0,ve.jsx)(ie.A,{className:"w-5 h-5 text-purple-400"})},{label:"Attendance Rate",value:a>0?`${Math.round(s/a*100)}%`:"0%",change:"+5%",trend:"up",icon:(0,ve.jsx)(oe.A,{className:"w-5 h-5 text-orange-400"})}]),o=e.map(e=>{var n;const r=t.filter(t=>t.eventId===e.id),a=r.filter(e=>e.checkedIn).length;return{name:(null===(n=e.name)||void 0===n?void 0:n.substring(0,12))+"..."||0,guests:r.length,checkedIn:a,rate:r.length>0?Math.round(a/r.length*100):0,date:e.date||(new Date).toISOString().split("T")[0]}}).sort((e,t)=>new Date(e.date)-new Date(t.date)),l=e.reduce((e,t)=>{const n=t.category||"Other";return e[n]=(e[n]||0)+1,e},{});return{stats:i,chartData:o,pieData:Object.entries(l).map(e=>{let[t,n]=e;return{name:t,value:n,percentage:Math.round(n/r*100)}})}})(),R=[{id:"checkins",label:"Check-ins",icon:(0,ve.jsx)(ie.A,{className:"w-4 h-4"})},{id:"attendance",label:"Attendance Rate",icon:(0,ve.jsx)(oe.A,{className:"w-4 h-4"})},{id:"categories",label:"Event Categories",icon:(0,ve.jsx)(le.A,{className:"w-4 h-4"})}],L=["#3B82F6","#10B981","#8B5CF6","#F59E0B","#EF4444","#06B6D4"],B=()=>{w(!0),N(null),window.location.reload()};return"client"===e?(0,ve.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-black flex items-center justify-center",children:(0,ve.jsxs)("div",{className:"text-center",children:[(0,ve.jsx)(ce.A,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),(0,ve.jsx)("h1",{className:"text-2xl font-bold text-white mb-2",children:"Access Denied"}),(0,ve.jsx)("p",{className:"text-gray-400",children:"Reports are only available for admin and owner accounts"})]})}):A?(0,ve.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-black",children:[(0,ve.jsx)(o.A,{}),(0,ve.jsxs)("div",{className:"ml-64 flex flex-col",children:[(0,ve.jsx)(l.A,{}),(0,ve.jsx)("main",{className:"flex-1 p-8 pt-24 flex items-center justify-center",children:(0,ve.jsxs)("div",{className:"text-center max-w-md",children:[(0,ve.jsx)(de.A,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),(0,ve.jsx)("h2",{className:"text-2xl font-bold text-white mb-4",children:"Error Loading Reports"}),(0,ve.jsx)("p",{className:"text-gray-400 mb-6",children:A}),(0,ve.jsxs)("button",{onClick:B,className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-all duration-200 flex items-center space-x-2 mx-auto",children:[(0,ve.jsx)(ue.A,{className:"w-4 h-4"}),(0,ve.jsx)("span",{children:"Try Again"})]})]})})]})]}):(0,ve.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-black",children:[(0,ve.jsx)(o.A,{}),(0,ve.jsxs)("div",{className:"ml-64 flex flex-col",children:[(0,ve.jsx)(l.A,{}),(0,ve.jsxs)("main",{className:"flex-1 p-8 pt-24",children:[(0,ve.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,ve.jsxs)("div",{children:[(0,ve.jsxs)("h1",{className:"text-3xl font-bold text-white mb-2 flex items-center",children:[(0,ve.jsx)(ce.A,{className:"w-8 h-8 mr-3 text-purple-400"}),"Reports & Analytics"]}),(0,ve.jsx)("p",{className:"text-gray-400",children:"Real-time insights and performance analytics"})]}),(0,ve.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,ve.jsxs)("button",{onClick:B,disabled:j,className:"flex items-center space-x-2 px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition-all duration-200 disabled:opacity-50",children:[(0,ve.jsx)(ue.A,{className:"w-4 h-4 "+(j?"animate-spin":"")}),(0,ve.jsx)("span",{children:"Refresh"})]}),(0,ve.jsxs)("button",{onClick:()=>{try{var e,t,n,r;const a={summary:{totalEvents:(null===(e=F[0])||void 0===e?void 0:e.value)||0,totalGuests:(null===(t=F[1])||void 0===t?void 0:t.value)||0,totalCheckIns:(null===(n=F[2])||void 0===n?void 0:n.value)||0,attendanceRate:(null===(r=F[3])||void 0===r?void 0:r.value)||"0%"},events:I,categories:T,exportDate:(new Date).toISOString(),dateRange:O,selectedEvent:k},s=JSON.stringify(a,null,2),i=new Blob([s],{type:"application/json"}),o=URL.createObjectURL(i),l=document.createElement("a");l.href=o,l.download=`reports-${(new Date).toISOString().split("T")[0]}.json`,l.click(),URL.revokeObjectURL(o),(0,c.P0)("Report exported successfully!","success")}catch(A){console.error("Export error:",A),(0,c.P0)("Failed to export report","error")}},className:"flex items-center space-x-2 px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-all duration-200",children:[(0,ve.jsx)(he.A,{className:"w-4 h-4"}),(0,ve.jsx)("span",{children:"Export"})]})]})]}),j?(0,ve.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,ve.jsxs)("div",{className:"text-center",children:[(0,ve.jsx)(ue.A,{className:"w-12 h-12 text-blue-400 mx-auto mb-4 animate-spin"}),(0,ve.jsx)("p",{className:"text-gray-400",children:"Loading real-time data..."})]})}):(0,ve.jsxs)(ve.Fragment,{children:[(0,ve.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:F.map((e,t)=>(0,ve.jsxs)("div",{className:"glass-dark p-6 rounded-2xl border border-white/10 hover:border-white/20 transition-all duration-300 group",children:[(0,ve.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,ve.jsx)("div",{className:"p-3 bg-purple-600/20 rounded-xl group-hover:scale-110 transition-transform",children:e.icon}),(0,ve.jsxs)("div",{className:"flex items-center space-x-1 text-sm "+("up"===e.trend?"text-green-400":"text-red-400"),children:["up"===e.trend?(0,ve.jsx)(me.A,{className:"w-4 h-4"}):(0,ve.jsx)(xe.A,{className:"w-4 h-4"}),(0,ve.jsx)("span",{children:e.change})]})]}),(0,ve.jsxs)("div",{children:[(0,ve.jsx)("p",{className:"text-2xl font-bold text-white mb-1",children:e.value}),(0,ve.jsx)("p",{className:"text-gray-400 text-sm",children:e.label})]})]},t))}),(0,ve.jsx)("div",{className:"glass-dark p-6 rounded-2xl border border-white/10 mb-8",children:(0,ve.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,ve.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,ve.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ve.jsx)(pe.A,{className:"w-4 h-4 text-gray-400"}),(0,ve.jsx)("span",{className:"text-gray-400 text-sm",children:"Filters:"})]}),(0,ve.jsxs)("select",{value:k,onChange:e=>S(e.target.value),className:"px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:border-purple-500 transition-all",children:[(0,ve.jsx)("option",{value:"all",children:"All Events"}),n.map(e=>(0,ve.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,ve.jsxs)("select",{value:O,onChange:e=>D(e.target.value),className:"px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:border-purple-500 transition-all",children:[(0,ve.jsx)("option",{value:"7",children:"Last 7 days"}),(0,ve.jsx)("option",{value:"30",children:"Last 30 days"}),(0,ve.jsx)("option",{value:"90",children:"Last 90 days"}),(0,ve.jsx)("option",{value:"365",children:"Last year"})]})]}),(0,ve.jsx)("div",{className:"flex items-center space-x-2 md:ml-auto",children:R.map(e=>(0,ve.jsxs)("button",{onClick:()=>P(e.id),className:"flex items-center space-x-2 px-4 py-2 rounded-lg text-sm font-medium transition-all "+(E===e.id?"bg-purple-600 text-white":"bg-white/10 text-gray-400 hover:bg-white/20"),children:[e.icon,(0,ve.jsx)("span",{children:e.label})]},e.id))})]})}),(0,ve.jsxs)("div",{className:"grid lg:grid-cols-2 gap-8 mb-8",children:["checkins"===E&&(0,ve.jsxs)("div",{className:"lg:col-span-2 glass-dark p-6 rounded-2xl border border-white/10",children:[(0,ve.jsxs)("h3",{className:"text-xl font-semibold text-white mb-6 flex items-center",children:[(0,ve.jsx)(ce.A,{className:"w-5 h-5 mr-2 text-blue-400"}),"Event Check-ins Overview"]}),(0,ve.jsx)("div",{className:"h-80",children:(0,ve.jsx)(d.u,{width:"100%",height:"100%",children:(0,ve.jsxs)(u.E,{data:I,children:[(0,ve.jsx)(h.d,{strokeDasharray:"3 3",stroke:"#374151"}),(0,ve.jsx)(m.W,{dataKey:"name",stroke:"#9CA3AF",fontSize:12}),(0,ve.jsx)(x.h,{stroke:"#9CA3AF",fontSize:12}),(0,ve.jsx)(p.m,{contentStyle:{backgroundColor:"#1F2937",border:"1px solid #374151",borderRadius:"8px",color:"#F9FAFB"}}),(0,ve.jsx)(f.s,{}),(0,ve.jsx)(y.y,{dataKey:"guests",fill:"#3B82F6",name:"Total Guests"}),(0,ve.jsx)(y.y,{dataKey:"checkedIn",fill:"#10B981",name:"Checked In"})]})})})]}),"attendance"===E&&(0,ve.jsxs)("div",{className:"lg:col-span-2 glass-dark p-6 rounded-2xl border border-white/10",children:[(0,ve.jsxs)("h3",{className:"text-xl font-semibold text-white mb-6 flex items-center",children:[(0,ve.jsx)(oe.A,{className:"w-5 h-5 mr-2 text-green-400"}),"Attendance Rate Trends"]}),(0,ve.jsx)("div",{className:"h-80",children:(0,ve.jsx)(d.u,{width:"100%",height:"100%",children:(0,ve.jsxs)(ee,{data:I,children:[(0,ve.jsx)(h.d,{strokeDasharray:"3 3",stroke:"#374151"}),(0,ve.jsx)(m.W,{dataKey:"name",stroke:"#9CA3AF",fontSize:12}),(0,ve.jsx)(x.h,{stroke:"#9CA3AF",fontSize:12}),(0,ve.jsx)(p.m,{contentStyle:{backgroundColor:"#1F2937",border:"1px solid #374151",borderRadius:"8px",color:"#F9FAFB"}}),(0,ve.jsx)(f.s,{}),(0,ve.jsx)(X,{type:"monotone",dataKey:"rate",stroke:"#10B981",strokeWidth:3,name:"Attendance Rate (%)"})]})})})]}),"categories"===E&&(0,ve.jsxs)("div",{className:"lg:col-span-2 glass-dark p-6 rounded-2xl border border-white/10",children:[(0,ve.jsxs)("h3",{className:"text-xl font-semibold text-white mb-6 flex items-center",children:[(0,ve.jsx)(le.A,{className:"w-5 h-5 mr-2 text-purple-400"}),"Event Categories Distribution"]}),(0,ve.jsx)("div",{className:"h-80",children:(0,ve.jsx)(d.u,{width:"100%",height:"100%",children:(0,ve.jsxs)(te.r,{children:[(0,ve.jsx)(ne.F,{data:T,cx:"50%",cy:"50%",labelLine:!1,label:e=>{let{name:t,percentage:n}=e;return`${t} ${n}%`},outerRadius:80,fill:"#8884d8",dataKey:"value",children:T.map((e,t)=>(0,ve.jsx)(re.f,{fill:L[t%L.length]},`cell-${t}`))}),(0,ve.jsx)(p.m,{contentStyle:{backgroundColor:"#1F2937",border:"1px solid #374151",borderRadius:"8px",color:"#F9FAFB"}}),(0,ve.jsx)(f.s,{})]})})})]})]}),(0,ve.jsxs)("div",{className:"glass-dark p-6 rounded-2xl border border-white/10",children:[(0,ve.jsxs)("h3",{className:"text-xl font-semibold text-white mb-6 flex items-center",children:[(0,ve.jsx)(fe.A,{className:"w-5 h-5 mr-2 text-orange-400"}),"Recent Check-ins"]}),(0,ve.jsxs)("div",{className:"space-y-4 max-h-60 overflow-y-auto",children:[g.filter(e=>e.checkedIn&&e.checkInTime).sort((e,t)=>new Date(t.checkInTime)-new Date(e.checkInTime)).slice(0,10).map((e,t)=>(0,ve.jsxs)("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded-lg",children:[(0,ve.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,ve.jsx)("div",{className:"w-8 h-8 bg-green-600 rounded-full flex items-center justify-center",children:(0,ve.jsx)(ie.A,{className:"w-4 h-4 text-white"})}),(0,ve.jsxs)("div",{children:[(0,ve.jsx)("p",{className:"text-white font-medium",children:e.name}),(0,ve.jsx)("p",{className:"text-gray-400 text-sm",children:e.eventName})]})]}),(0,ve.jsxs)("div",{className:"text-right",children:[(0,ve.jsx)("p",{className:"text-gray-400 text-sm",children:new Date(e.checkInTime).toLocaleTimeString()}),(0,ve.jsx)("p",{className:"text-gray-500 text-xs",children:new Date(e.checkInTime).toLocaleDateString()})]})]},t)),0===g.filter(e=>e.checkedIn).length&&(0,ve.jsxs)("div",{className:"text-center py-8",children:[(0,ve.jsx)(ye.A,{className:"w-12 h-12 text-gray-600 mx-auto mb-4"}),(0,ve.jsx)("p",{className:"text-gray-400",children:"No check-ins yet"})]})]})]})]})]})]})]})}}}]);